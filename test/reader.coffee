test = require('tap').test
r = require '../lib/reader.coffee'

test "reader", (t) ->
  s = r.read './duality.csv'

  expected =
    column_headings: [ '1', '2', '3', '4', '5', '6', '7', '8', '9', '10', '11', '12', '13', '14' ]
    row_headings: ['Eleanor', 'Brenda', 'Dorothy', 'Verne', 'Flora', 'Olivia', 'Laura', 'Evelyn', 'Pearl', 'Ruth', 'Sylvia', 'Katherine', 'Myrna', 'Theresa', 'Charlotte', 'Frances', 'Helen', 'Nora' ]
    membership:
     [ [ 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0 ],
       [ 0, 1, 0, 1, 0, 0, 1, 1, 0, 1, 0, 1, 1, 0 ],
       [ 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0 ],
       [ 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0, 0 ],
       [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0 ],
       [ 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0 ],
       [ 0, 1, 1, 1, 0, 0, 1, 1, 0, 1, 0, 1, 0, 0 ],
       [ 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 0, 1, 1, 0 ],
       [ 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0 ],
       [ 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0 ],
       [ 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1 ],
       [ 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 1, 1, 0, 1 ],
       [ 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 0 ],
       [ 0, 1, 1, 1, 0, 1, 1, 1, 0, 0, 0, 1, 1, 0 ],
       [ 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0 ],
       [ 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0 ],
       [ 1, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 1, 0, 0 ],
       [ 1, 0, 0, 1, 1, 1, 0, 1, 1, 0, 1, 0, 0, 1 ] ]

  t.deepEqual s, expected, 'reader working'

  t.end()
